{% extends "admin.html" %}

{% block title %}Edit article{% endblock %}

{% block body %}
<ol class="breadcrumb">
    <li><a href="/admin">Admin</a></li>
    <li><a href="/admin/articles">Articles</a></li>
    <li class="active">Edit draft</li>
</ol>

<form method="post" action="/admin/articles/{{ article.id }}/submit">
    <div class="form-group">
        <label for="title">Title</label>
        <input type="text" value="{{ user.title }}" class="form-control" name="title" id="title" placeholder="Title">
    </div>

    {% if current_user.is_admin or current_user.is_editor %}
    <div class="form-group">
        <label for="slug">Slug</label>
        <input type="text" value="{{ user.slug }}" class="form-control" name="slug" id="slug" placeholder="Slug">
    </div>
    {% endif %}

    <div class="form-group">
        <label for="content">Title</label>
        <textarea id="content" name="content" class="form-control" rows="5">{{ article.content }}</textarea>
    </div>

    {% if tags %}
    <div class="form-group">
    <ul>
        {% for tag in tags %}
        <li><input type="checkbox" name="tags[]" value="{{ tag.id }}"> {{ tag.name }}</li>
        {% endfor %}
    </ul>
    </div>
    {% endif %}

    <input type="hidden" name="_METHOD" value="PUT">

    {% if current_user.is_admin or current_user.is_editor %}
        <button type="submit" formaction="/admin/articles/{{ article.id }}/approve" class="btn btn-primary">Approve</button>
    {% else %}
        <button type="submit" class="btn btn-primary">Submit</button>
    {% endif %}
    <button type="submit" formaction="/admin/articles/{{ article.id }}" class="btn btn-default">Save draft</button>
</form>
{% endblock %}

{% block scripts %}
<script src="//cdn.ckeditor.com/4.5.6/standard/ckeditor.js"></script>
<script>
    CKEDITOR.replace( 'description' );
</script>
{% endblock %}
